<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>旧的生命周期函数</title>
</head>
<style>
    p {
        text-align: center;
    }
</style>

<body>
    <div>
        <p> <img src="react生命周期(旧).png" alt="" width="800px"> </p>
    </div>
    <div id="rong-qi"></div>

    <script src="../js/react.development.js"></script>
    <script src="../js/react-dom.development.js"></script>
    <script src="../js/babel.min.js"></script>

    <script type="text/babel">

        class Life extends React.Component {
            constructor(props) {
                super(props)
                console.log('Life|Constructor');
                this.state = {
                    count: 0
                }
            }
            // 生命周期方法
            componentWillMount() {
                console.log('LIFE|will mount');
            }
            componentDidMount() {
                console.log('LIFE|did mount');
            }
            componentWillUnmount() {
                console.log('LIFE|will unmount');
            }
            // 无此生命周期方法,因为此时已经被卸载了
            // componentDidUnmount() {  
            //     console.log('LIFE|did unmount');
            // }

            componentWillUpdate() {
                console.log('LIFE|will update');
            }

            componentDidUpdate() {
                console.log('LIFE|did update');
            }

            shouldComponentUpdate() {
                console.log('LIFE| should update?');
                return true;
                // return false;
            }

            // 自定义方法

            handleBtn = () => {
                this.setState({
                    count: this.state.count + 1
                })
            }

            forceBtn = () => {
                this.forceUpdate();
            }

            unmountBtn = () => {
                ReactDOM.unmountComponentAtNode(document.getElementById("rong-qi"));
            }
            render() {
                console.log('render');
                // console.log('render', this);
                return (
                    <div>
                        <h1 >当前点击 {this.state.count}</h1>
                        <div></div>
                        <button onClick={this.handleBtn}>点击加一</button>
                        <button onClick={this.forceBtn}>强制更新</button>
                        <button onClick={this.unmountBtn}>点击卸载组件</button>

                    </div>
                )
            }
        }

        ReactDOM.render(<Life />, document.getElementById("rong-qi"));
    </script>
</body>

</html>